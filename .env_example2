# ============================================================
# FrappeHR 15 — Environment Configuration
# Copy this file to .env and fill in your values.
#   cp .env.example .env
# ============================================================


# ── Custom Image ─────────────────────────────────────────────
# Name and tag of the custom Docker image you built (see apps.json).
# After building: docker build ... --tag=custom-hrms:15
CUSTOM_IMAGE=custom-hrms
CUSTOM_TAG=15

# "missing" = use local image, never pull from registry.
# Change to "always" if you push your image to a registry.
PULL_POLICY=missing


# ── MariaDB ──────────────────────────────────────────────────
# Root password for the MariaDB instance.
# Used when creating the Frappe site.
DB_ROOT_PASSWORD=changeme_strong_password


# ── Frappe Site ───────────────────────────────────────────────
# The site name Frappe uses to route requests.
# Set to your actual domain (e.g. erp.mydomain.com).
# Leave as $$host to auto-detect from the request Host header.
FRAPPE_SITE_NAME_HEADER=erp.mydomain.com

# The admin password set when creating the site (for reference).
# This is only used in the bench new-site command, not at runtime.
ADMIN_PASSWORD=changeme_admin_password

# The site name used in bench new-site (must match the domain
# your reverse proxy forwards to this container).
SITE_NAME=erp.mydomain.com


# ── HTTP Port ────────────────────────────────────────────────
# Port the Nginx frontend listens on inside the host.
# Your external reverse proxy (e.g. NPM) should forward to this.
HTTP_PUBLISH_PORT=8067


# ── Reverse Proxy Settings ────────────────────────────────────
# IP of the upstream reverse proxy (for real-IP passthrough).
UPSTREAM_REAL_IP_ADDRESS=127.0.0.1
UPSTREAM_REAL_IP_HEADER=X-Forwarded-For
UPSTREAM_REAL_IP_RECURSIVE=off

# Request timeout (seconds) and max upload size.
PROXY_READ_TIMEOUT=120
CLIENT_MAX_BODY_SIZE=50m


# ── Data Paths ────────────────────────────────────────────────
# Where to store persistent data on the host.
# All three directories must exist before starting the stack:
#   mkdir -p ./data/{mariadb,redis,sites}
#
# Relative paths are resolved from the project directory.
# For TrueNAS Scale: use absolute dataset paths instead, e.g.:
#   DB_DATA_PATH=/mnt/tank/apps/hrms/mariadb
#   REDIS_DATA_PATH=/mnt/tank/apps/hrms/redis
#   SITES_PATH=/mnt/tank/apps/hrms/sites
#
# Recommended TrueNAS dataset layout:
#   pool/
#   └── apps/
#       └── hrms/
#           ├── mariadb/   ← DB_DATA_PATH  (Record Size: 16K)
#           ├── redis/     ← REDIS_DATA_PATH
#           └── sites/     ← SITES_PATH
DB_DATA_PATH=/mnt/data/hrms/mariadb
REDIS_DATA_PATH=/mnt/data/hrms/redis
SITES_PATH=/mnt/data/hrms/sites